<!doctype html>
<html>
<head>
	<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>

	<style>
	</style>

<script>	

var getUrlParameter = function getUrlParameter(sParam) {
    var sPageURL = decodeURIComponent(window.location.search.substring(1)),
        sURLVariables = sPageURL.split('&'),
sParameterName,
        i;

    for (i = 0; i < sURLVariables.length; i++) {
        sParameterName = sURLVariables[i].split('=');

		    if (sParameterName[0] === sParam) {
            return sParameterName[1] === undefined ? true : sParameterName[1];
		    }
    }
};

// test create password
function createPassword(){
	var passwordString = "test"+ Math.floor(Math.random() * 10);

	return passwordString;
}


var passwordAccept = false;
var password = "";
var eventType = "";
// password creation

$(document).ready(function(){

	var create = getUrlParameter("create");
	var enter = getUrlParameter("enter");
	var type = getUrlParameter("type");

	var checkPassword = opener.document.getElementById("c"+type).getAttribute('data-password');

	if (create === "true"){

		// CREATE PASSWORD
		password = createPassword();

	} else if (enter === "true"){
		password = checkPassword;

		$('#createform').remove();
		$('#enterform').show();
	} else {
		alert ("no variable detected!");
	}



	$("input[name='realPassword'").val(password);

});

function enterPassword(type){
	if (type == 'Test'){
		if ($("input[name='pracPassword'").val() === password){
			alert("You entered password correctly!");
		} else {
			alert("Sorry you made a mistake!");
		}
	} else {
		if ($("input[name='inputPassword'").val() === password){
			alert("You entered password correctly!");
			eventType = "Success";


		} else {
			alert("Sorry you made a mistake!");
			eventType = "Failed";
		}

		passwordAccept = true;
		window.close();

	}

}


function togPassword() {

    $("input[name='realPassword'").toggle();
}

function acceptPassword(){
	passwordAccept = true;
	window.close();
}

</script>
<body>


  <div id="createform" style="display: block;">
    <form id="createcontrol">
      Your password is: 
      <input type="text" name="realPassword" value="" readonly="" readsize="42" style="border-style:none;font-size:14pt;font-family:monospace;font-weight:bold; "><br>

      Check the box to make your real password hidden or shown.
      <input type="checkbox" name="check" checked="" onclick="togPassword()"><br>
      
      Please practice your password now:
      <input type="password" size="10" name="pracPassword" value="">
      <input type="button" value="Test" onclick="enterPassword('Test')"><br>
      
      When you're finished practicing, click accept. <br>
      <input type="button" value="Accept Password" onclick="acceptPassword()">
    </form>
  </div>
  <div id="enterform" style="display:none">
    <form id="entercontrol">
      Password:
      <input type="password" size="10" name="inputPassword" value="">
      <input type="button" value="Done" onclick="enterPassword()"><p>
    </p></form>
  </div>
  
 

</body>


</head>

</html>